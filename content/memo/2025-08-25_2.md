+++
title = "覚え書き：2025-08-24T12:55:23+09:00"
date = 2025-08-24T12:55:23+09:00
tags = ["覚え書き", "hugo", "Build"]
accident_tags = []
emotional_temp = ""
draft = true
+++

## 📝 概要
- Hugo ビルドの仕組み

## 📅 ログ
- "2025-08-24": Copilot Log
  
> **職人**:ビルド時のエラーはどういう仕組みで出てるの？

> **Copilot**:これはいい問いですね。Hugo のビルド時エラーは、ざっくり言えば「Goテンプレートエンジン＋Hugoの独自処理系」が、**構文・型・ファイル構造・依存関係**をチェックしてる仕組みです。職人さんの文脈で言うなら「テンプレート資産の構文的健全性チェック」ですね。

---

## 🧠 Hugoビルド時エラーの発生メカニズム

### 1. **テンプレート構文の解析（Go Template Engine）**
- HugoはGo言語のテンプレートエンジンを使っているので、`{{ }}` の中の構文はGoのルールに従う
- 例えば `{{ .Title | upper }}` のような構文で、関数名やパイプの順序が間違っていると即エラー
- 型不一致（例：`.Date` に対して文字列関数を使う）もここで検出される

### 2. **Hugo独自の構造チェック**
- `config.toml` や `archetypes/`, `layouts/`, `content/` の構成が正しくないとエラー
- 例えば `archetypes/default.md` に未定義の変数があると、`hugo new` 実行時にエラー
- `params` や `site.Data` の参照ミスもここで検出される

### 3. **ファイルの存在・依存関係チェック**
- `partial` や `include` で指定したファイルが存在しないとエラー
- `resources.Get` や `image processing` 系の関数で、対象ファイルが見つからない場合もエラー

### 4. **ビルドフェーズの型チェックと展開**
- `.Site.Pages` や `.Params` のような変数展開時に、存在しないフィールドを参照するとエラー
- 特に `.Scratch` や `.Get` 系は、事前にセットしてないと「nil参照」エラーになることがある

---

## 🔍 エラーの出力タイミング

| フェーズ             | エラー例                 | 出力タイミング       |
| -------------------- | ------------------------ | -------------------- |
| `hugo new`           | archetype構文ミス        | コマンド実行時       |
| `hugo server`        | テンプレート構文・型ミス | 保存時 or 初回起動時 |
| `hugo`（静的ビルド） | ファイル構造・依存ミス   | ビルド時にまとめて   |

---

## 🧩 職人さん向けの応用視点

- **エラーも文化資産**：エラー文をログ化して「構文事故タグ」「温度タグ」つけておくと、テンプレ進化の記録になる
- **構文検証テンプレート**：`layouts/_debug/test.html` などに「わざとエラーを出す構文」を書いて、挙動を観察するのもアリ
- **エラー分類辞書**：将来的に「Hugoエラー分類辞書」を作って、事故ログからテンプレ改善ルートを導くのも面白い

---



## 🔗 参考リンク
 - 

## 💡 次のアクション
- 構文検証ほうほうをつめる